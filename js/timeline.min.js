const styleLink=document.createElement("link");async function fetchUserData(e){const t=await fetch(`https://api.github.com/users/${e}`);return await t.json()}async function fetchUserEvents(e){const t=await fetch(`https://api.github.com/users/${e}/events`);return await t.json()}function changeTheme(){document.querySelector(".container").classList.toggle("dark-mode")}async function setContainerSize(e,t,n){e&&n.style.setProperty("--container-width",e),t&&n.style.setProperty("--colon-height",t)}async function createEventElement(e,t){const n=document.querySelector(".col"),a={year:"numeric",month:"long",day:"numeric"},c=document.createDocumentFragment();if(e.length)e.forEach((e=>{const n=e.org?e.org.avatar_url:e.actor.avatar_url,o=e.repo.name.split("/")[0],s=t.name?t.name:t.login,i=new Date(e.created_at).toLocaleDateString("en-US",a),l=document.createElement("div");l.className="row";const d=document.createElement("div");d.className="image";const m=document.createElement("img");m.src=n,m.alt="image",d.appendChild(m);const r=document.createElement("div");r.className="text-container";const h=document.createElement("div");h.className="user-name",h.textContent=o;const p=document.createElement("div");p.className="method",p.textContent=`${s} ${e.payload.action?e.payload.action:""} ${e.type.replace("Event","")}`;const u=document.createElement("div");u.className="adress";const E=document.createElement("a");E.href=`https://github.com/${e.repo.name}`,E.target="_blank",E.textContent=e.repo.name,u.appendChild(E),r.appendChild(h),r.appendChild(p),r.appendChild(u);const C=document.createElement("div");C.className="date",C.textContent=i,l.appendChild(d),l.appendChild(r),l.appendChild(C),c.appendChild(l)}));else{const e=document.createElement("div");e.className="not-found",e.textContent="Event Not Found",c.appendChild(e)}n.appendChild(c)}async function createFrame(e,t){const n=t.login?t.login:null,a=n?`<a href="https://github.com/${n}" target="_blank">@${n}</a>`:'<a href="javascript:void(0)"> @UserNotFound</a>',c=document.createDocumentFragment(),o=document.createElement("div");o.className="container";const s=document.createElement("div");s.className="header";const i=document.createElement("div");i.className="title",i.innerHTML=a;const l=document.createElement("div");l.className="weatherMode";const d=document.createElement("input");d.type="checkbox",d.className="checkbox",d.id="checkbox",d.addEventListener("click",(()=>{changeTheme()}));const m=document.createElement("label");m.className="label",m.htmlFor="checkbox";const r=document.createElement("div");r.className="ball",m.appendChild(r),l.appendChild(d),l.appendChild(m),s.appendChild(i),s.appendChild(l);const h=document.createElement("div");h.className="col";const p=document.createElement("div");p.className="footer",p.textContent="Github Timeline",o.appendChild(s),o.appendChild(h),o.appendChild(p),c.appendChild(o),e.appendChild(c)}async function createTimeline(){const e=document.getElementById("timeline"),t=e.dataset,[n,a]=await Promise.all([fetchUserData(t.user),fetchUserEvents(t.user)]);await setContainerSize(t.width,t.height,e),await createFrame(e,n),await createEventElement(a,n)}styleLink.setAttribute("rel","stylesheet"),styleLink.setAttribute("href","https://cdn.jsdelivr.net/gh/sidarilaslan/timeline/css/timeline.min.css"),document.head.appendChild(styleLink),createTimeline();
